---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liaozhaoyan.
--- DateTime: 2023/4/5 23:49
---

require("common.class")
local CcoHttpCli = require("httplib.coHttpCli")
local pystring = require("common.pystring")

local CcoInflux = class("coInflux", CcoHttpCli)

function CcoInflux:_init_(host, port, url)
    CcoHttpCli._init_(self, host, port, url)
end

function CcoInflux:echo(tReq)
    print(tReq.code, tReq.data)
end

function CcoInflux:pack(msg)
    local line = self:packCliHead('POST', self._url)
    local head = {
        Host = self._host,
        ["Content-Type"] = "text/plain",
        ["Content-Length"] = #msg,
    }
    local heads = self:packCliHeaders(head)
    return pystring:join("\r\n", {line, heads, msg})
end

return CcoInflux
