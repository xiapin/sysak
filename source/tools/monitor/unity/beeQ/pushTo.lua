---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liaozhaoyan.
--- DateTime: 2023/4/7 01:36
---

package.path = package.path .. ";../?.lua;"

local coCli = require("httplib.coCli")
local coInflux = require("httplib.coInflux")
local unistd = require("posix.unistd")
local system = require("common.system")

function work(fd, fYaml)
    local res = system:parseYaml(fYaml)
    local pushTo = res.pushTo
    local frame = coCli.new(fd)
    local c = coInflux.new(pushTo.host, pushTo.port, pushTo.url)
    frame:poll(c)
    print("end push.")
    return 0
end
