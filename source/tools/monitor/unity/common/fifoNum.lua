---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by liaozhaoyan.
--- DateTime: 2023/3/29 11:58 PM
---

require("common.class")

local Cfifo = require("common.fifo")

local CfifoNum = class("fifoNum", Cfifo)

function CfifoNum:_init_(maxLen)
    Cfifo._init_(self, maxLen)
end

function CfifoNum:max()
    assert(self._count > 0, "fifo count should > 0")
    local res, index

    res, index = self.list[self._head], 1
    for k, v in pairs(self.list) do
        if v > res then
            res = v
            index = k - self._head + 1
        end
    end
    return res, index
end

function CfifoNum:min()
    assert(self._count > 0, "fifo count should > 0")
    local res, index

    res, index = self.list[self._head], 1
    for k, v in pairs(self.list) do
        if v < res then
            res = v
            index = k - self._head + 1
        end
    end
    return res, index
end

function CfifoNum:average()
    assert(self._count > 0, "fifo count should > 0")
    local sum = 0

    for _, v in pairs(self.list) do
        sum = sum + v
    end

    return sum / self._count
end

return CfifoNum